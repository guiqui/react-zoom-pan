!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("react-flow",["React"],t):"object"==typeof exports?exports["react-flow"]=t(require("react")):e["react-flow"]=t(e.React)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ObjectTypes={TYPE_ITEM:0,TYPE_LINK:1};t.default={MODE_GLOBAL_PAN:1,MODE_RUBER_BAND_MOVE:2,MODE_RUBER_BAND_ROTATE:3,MODE_RUBER_BAND_RESIZE_UL:4,MODE_RUBER_BAND_RESIZE_UR:5,MODE_RUBER_BAND_RESIZE_DL:6,MODE_RUBER_BAND_RESIZE_DR:7,MODE_RUBER_PADDING:8,MODE_RUBER_ADD_LINK_LEFT:9,MODE_RUBER_ADD_LINK_RIGHT:10,MODE_PAGE_MOVE:11,CLOCKWISE:22,UNCLOCKWISE:23,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_COPY:67,KEY_CUT:88,KEY_PASTE:86,KEY_DELETE:46,RUBBER_BAND_HANDLE_SIZE:5,RUBBER_BAND_EVENT_HANDLE_SIZE:10,RUBBER_BAND_EVENT_HANDLE_SIZE_HALF:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addAll=function(e){e&&(t.data={},e.forEach(function(e){t.data[e.id]=e}))},this.data={}}return r(e,[{key:"add",value:function(e,t){this.data[e]=t}},{key:"del",value:function(e){delete this.data[e]}},{key:"get",value:function(e){return this.data[e]}},{key:"delAll",value:function(){this.data={}}}]),e}());t.default=o},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,l=0,c=[],f=n(12);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),h(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;n=u||(u=v(t)),r=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=f(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=d(e,t);return p(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&p(d(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete i[s.id]}}}};var E,_=(E=[],function(e,t){return E[e]=t,E.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply(t)}return r(e,[{key:"apply",value:function(e){var t=[1,0,0,1,0,0];e&&(t=e.split(",")),this.a=parseFloat(t[0]),this.b=parseFloat(t[1]),this.c=parseFloat(t[2]),this.d=parseFloat(t[3]),this.e=parseFloat(t[4]),this.f=parseFloat(t[5]),this.transform=this.transform.bind(this),this.rotate=this.rotate.bind(this),this.applyToPoint=this.applyToPoint.bind(this),this._isEqual=this._isEqual.bind(this)}},{key:"flipX",value:function(){return this.transform(-1,0,0,1,0,0)}},{key:"flipY",value:function(){return this.transform(1,0,0,-1,0,0)}},{key:"reset",value:function(){return this.a=this.d=1,this.b=this.c=this.e=this.f=0,this}},{key:"rotate",value:function(e){var t=Math.cos(.017453292519943295*e),n=Math.sin(.017453292519943295*e);return this.transform(t,n,-n,t,0,0)}},{key:"rotateDeg",value:function(e){return this.rotate(.017453292519943295*e)}},{key:"scale",value:function(e,t){return this.transform(e,0,0,t,0,0)}},{key:"scaleX",value:function(e){return this.transform(e,0,0,1,0,0)}},{key:"scaleY",value:function(e){return this.transform(1,0,0,e,0,0)}},{key:"skew",value:function(e,t){return this.transform(1,t,e,1,0,0)}},{key:"skewX",value:function(e){return this.transform(1,0,e,1,0,0)}},{key:"skewY",value:function(e){return this.transform(1,e,0,1,0,0)}},{key:"setTransform",value:function(e,t,n,r,o,i){return this.a=e,this.b=t,this.c=n,this.d=r,this.e=o,this.f=i,this}},{key:"translate",value:function(e,t){return this.transform(1,0,0,1,e,t)}},{key:"transform",value:function(t,n,r,o,i,a){var s=this.a,u=this.b,l=this.c,c=this.d,f=this.e,p=this.f,d=new e;return d.a=s*t+l*n,d.b=u*t+c*n,d.c=s*r+l*o,d.d=u*r+c*o,d.e=s*i+l*a+f,d.f=u*i+c*a+p,d}},{key:"multiply",value:function(t){var n=new e,r=this.a,o=this.b,i=this.c,a=this.d,s=this.e,u=this.f;return n.a=r*t.a+i*t.b,n.b=o*t.a+a*t.b,n.c=r*t.c+i*t.d,n.d=o*t.c+a*t.d,n.e=r*t.e+i*t.f+s,n.f=o*t.e+a*t.f+u,n}},{key:"inverse",value:function(){var t=this.a,n=this.b,r=this.c,o=this.d,i=this.e,a=this.f,s=new e,u=t*o-n*r;return s.a=o/u,s.b=-n/u,s.c=-r/u,s.d=t/u,s.e=(r*a-o*i)/u,s.f=-(t*a-n*i)/u,s}},{key:"interpolate",value:function(t,n){var r=new e;return r.a=this.a+(t.a-this.a)*n,r.b=this.b+(t.b-this.b)*n,r.c=this.c+(t.c-this.c)*n,r.d=this.d+(t.d-this.d)*n,r.e=this.e+(t.e-this.e)*n,r.f=this.f+(t.f-this.f)*n,r}},{key:"applyToPoint",value:function(e,t){return{x:e*this.a+t*this.c+this.e,y:e*this.b+t*this.d+this.f}}},{key:"applyToArray",value:function(e){var t=0,n=void 0,r=void 0,o=[];if("number"==typeof e[0])for(r=e.length;t<r;)n=this.applyToPoint(e[t++],e[t++]),o.push(n.x,n.y);else for(;n=e[t];t++)o.push(this.applyToPoint(n.x,n.y));return o}},{key:"applyToTypedArray",value:function(e){for(var t=0,n=void 0,r=e.length,o=new Float32Array(r);t<r;)n=this.applyToPoint(e[t],e[t+1]),o[t++]=n.x,o[t++]=n.y;return o}},{key:"isIdentity",value:function(){return this._isEqual(this.a,1)&&this._isEqual(this.b,0)&&this._isEqual(this.c,0)&&this._isEqual(this.d,1)&&this._isEqual(this.e,0)&&this._isEqual(this.f,0)}},{key:"isEqual",value:function(e){return this._isEqual(this.a,e.a)&&this._isEqual(this.b,e.b)&&this._isEqual(this.c,e.c)&&this._isEqual(this.d,e.d)&&this._isEqual(this.e,e.e)&&this._isEqual(this.f,e.f)}},{key:"_isEqual",value:function(e,t){return Math.abs(e-t)<1e-14}},{key:"matrixToText",value:function(){return this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f}},{key:"trx",get:function(){return this.e},set:function(e){this.e=e}},{key:"try",get:function(){return this.f},set:function(e){this.f=e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(1)),i=u(n(5)),a=u(n(14)),s=u(n(2));function u(e){return e&&e.__esModule?e:{default:e}}var l=180/Math.PI,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"normaliseVector",value:function(e){return Math.abs(e.x)>Math.abs(e.y)?e.x>0?{x:1,y:0}:{x:-1,y:0}:e.y>0?{x:0,y:1}:{x:0,y:-1}}},{key:"calculateDistance",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"calculateRotationsAngle",value:function(t,n,r){var o=e.calculateDistance(t,n),i=e.calculateDistance(r,n),a=e.calculateDistance(t,r),s=Math.pow(o,2)+Math.pow(i,2)-Math.pow(a,2),u=2*o*i;return Math.acos(s/u)*l}},{key:"getParentMatrix",value:function(t,n){var r=s.default.get(t).parent;if(!r)return n;var o=s.default.get(r).matrix;return n=n?n.multiply(o):o,e.getParentMatrix(r,n)}},{key:"getCombineMatrix",value:function(t){var n=new i.default(s.default.get(t).transform),r=e.getParentMatrix(t,n);return r||n}},{key:"degrees",value:function(e){return e*l}},{key:"rotateToCenter",value:function(e,t,n,r){return 0!=n&&r?r=(r=(r=r.translate(e,t)).rotate(n)).translate(-e,-t):r}},{key:"scaleToCenter",value:function(e,t,n,r){return 0!=n&&r?r=(r=(r=r.translate(e,t)).scale(n)).translate(-e,-t):r}},{key:"getRotationDirection",value:function(t,n,r){var i={x:n.x-t.x,y:n.y-t.y};return 0===(i=e.normaliseVector(i)).y?t.y-r.y<0?i.x>0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:i.x<0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:t.x-r.x>0?i.y>0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:i.y<0?o.default.CLOCKWISE:o.default.UNCLOCKWISE}},{key:"transfromIncrement",value:function(e,t,n,r){var o=n;o=n?o.multiply(r):r;var i=new a.default(0,0),s=new a.default(e,t),u=o.inverse();return i.matrixTransform(u),s.matrixTransform(u),{dx:s.x-i.x,dy:s.y-i.y}}},{key:"coordinatesGlobalToLocal",value:function(e,t,n,r){var o=new a.default(e,t);return n&&o.matrixTransform(n.inverse()),r&&o.matrixTransform(r.inverse()),o}},{key:"transformToViewPort",value:function(e,t,n,r,o){var i=new a.default(e,t);if(!n||!r)return i;o&&(n=n.multiply(o));var s=n.multiply(r);return i.matrixTransform(s),i}},{key:"viewPorttoObject",value:function(e,t,n,r){var o=new i.default;o.translate(e,t);var a=n||o;return r&&(a=a.multiply(r)),a=a.inverse(),o.multiply(a)}},{key:"calculateRubberBandPosition",value:function(t,n,r,a){if(!t)return{x:0,y:0,w:0,h:0,transform:0};var s=n,u=t;(s=this.calculateTrasformBox(s,r,u,a)).x=s.x-o.default.RUBBER_BAND_HANDLE_SIZE,s.y=s.y-o.default.RUBBER_BAND_HANDLE_SIZE,s.w=s.w+2*o.default.RUBBER_BAND_HANDLE_SIZE,s.h=s.h+2*o.default.RUBBER_BAND_HANDLE_SIZE;var l=new i.default,c=s.x+s.w/2,f=s.y+s.h/2;return l=(l=e.rotateToCenter(c,f,s.angle,l)).matrixToText(),{x:s.x,y:s.y,w:s.w,h:s.h,transform:l}}},{key:"calculateTrasformBox",value:function(t,n,r,o){var i=0;0!=r.b&&(i=e.degrees(Math.atan2(r.b,r.a))),o&&(n=n.multiply(o));var s=t.w/2,u=t.h/2;r=e.rotateToCenter(s,u,-i,r);var l=n.multiply(r),c=new a.default(0,0),f=new a.default(t.w,t.h);return c.matrixTransform(l),f.matrixTransform(l),f.x=f.x-c.x,f.y=f.y-c.y,{x:c.x,y:c.y,w:f.x,h:f.y,angle:i}}},{key:"moveObject",value:function(t,n,r){var o=e.transfromIncrement(t,n,r.viewportMtx,r.selection.matrix),i=r.selection.matrix;return{matrix:i=i.translate(-o.dx,-o.dy),box:null}}},{key:"checkConstrains",value:function(t,n,r){if(!r)return!0;var o=new a.default(0,0),i=new a.default(t.w,0),s=new a.default(0,t.h),u=new a.default(t.w,t.h);return o.matrixTransform(n),!!e.isPointInBox(o,r)&&(i.matrixTransform(n),!!e.isPointInBox(i,r)&&(s.matrixTransform(n),!!e.isPointInBox(s,r)&&(u.matrixTransform(n),!!e.isPointInBox(u,r))))}},{key:"isPointInBox",value:function(e,t){return!(e.x<0||e.y<0)&&!(e.x>t.w||e.y>t.h)}},{key:"rotateObject",value:function(t,n,r,i,a){var s=a.box,u=s.x+s.w/2,l=s.y+s.h/2,c={x:r,y:i},f={x:t,y:n},p=e.transformToViewPort(u,l,a.viewportMtx,a.selection.matrix,a.parentMtx),d=e.getRotationDirection(c,f,p),h=e.calculateRotationsAngle(c,p,f);h=d==o.default.CLOCKWISE?h:-h;var y=a.selection.matrix;return{matrix:y=(y=(y=y.translate(u,l)).rotate(h)).translate(-u,-l),box:null}}},{key:"scaleObject",value:function(t,n,r,o){var i=o.box,a=i.x+i.w/2,s=i.y+i.h/2;r||(t=-t,n=-n);var u=e.transfromIncrement(t,n,o.viewportMtx,o.selection.matrix),l=e.transfromIncrement(i.x+i.w-a,i.y+i.h-s,o.viewportMtx,o.selection.matrix),c=e.transfromIncrement(i.x+i.w-u.dx-a,i.y+i.h-u.dy-s,o.viewportMtx,o.selection.matrix);if(!(i.x+i.w-u.dx<a||i.y+i.h-u.dy<s)){var f=c.dx/l.dx,p=c.dy/l.dy,d=o.selection.matrix;return{matrix:d=(d=(d=d.translate(a,s)).scale(f,p)).translate(-a,-s),box:null}}}},{key:"resizeObject",value:function(t,n,r,i){var a=i.selection.box,s=0,u=0,l=e.transfromIncrement(t,n,i.viewportMtx,i.selection.matrix),c=0,f=0,p=i.selection.matrix;switch(r){case o.default.MODE_RUBER_BAND_RESIZE_UL:s=-l.dx,u=-l.dy,c=l.dx,f=l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_UR:u=-l.dy,c=-l.dx,f=l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_DL:s=-l.dx,c=l.dx,f=-l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_DR:c=-l.dx,f=-l.dy}var d={x:0,y:0,w:a.w+c,h:a.h+f};return{matrix:p=p.translate(s,u),box:d}}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=v(i),s=v(n(8)),u=v(n(13)),l=n(1),c=v(l),f=v(n(6)),p=v(n(17)),d=v(n(18)),h=v(n(5)),y=v(n(2));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return m(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,i.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"render",value:function(){return a.default.createElement("svg",{x:"0",y:"0",width:"100%",height:"100%"},a.default.createElement("g",null,a.default.createElement("defs",null,a.default.createElement("pattern",{id:"smallGrid",width:"8",height:"8",patternUnits:"userSpaceOnUse"},a.default.createElement("path",{d:"M 8 0 L 0 0 0 8",fill:"none",stroke:"white",strokeWidth:"0.5"})),a.default.createElement("pattern",{id:"grid",width:"80",height:"80",patternUnits:"userSpaceOnUse"},a.default.createElement("rect",{width:"80",height:"80",fill:"url(#smallGrid)"}),a.default.createElement("path",{d:"M 80 0 L 0 0 0 80",fill:"none",stroke:"white",strokeWidth:"1"}))),a.default.createElement("rect",{width:"100%",height:"100%",fill:"silver"}),a.default.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)"})))}}]),t}(),w=function(e){function t(e){m(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calcNewDataState=function(e){y.default.addAll(e)},n.addRemoveMouseListener=function(e,t){e.dragging&&!t.dragging?(document.addEventListener("mousemove",n.doMouseMove),document.addEventListener("mouseup",n.doMouseUp)):!e.dragging&&t.dragging&&(document.removeEventListener("mousemove",n.doMouseMove),document.removeEventListener("mouseup",n.doMouseUp))},n.getSelectedObjInfo=function(e){var t=e?new h.default(e.transform):new h.default,r=e?{id:e.id,x:0,y:0,w:e.w,h:e.h}:{id:"",x:0,y:0,w:0,h:0},o=e?n.getObjType(e):l.ObjectTypes.TYPE_ITEM;return{item:e,matrix:t,transform:t.matrixToText(),box:r,type:o}},n.doGlobalMouseDown=function(e){0===e.button&&(n.setDraggingPosition(e),n.setState({dragging:!0}),n.mode=c.default.MODE_GLOBAL_PAN)},n.doObjectMouseDown=function(e,t,r){e.stopPropagation(),n.setDraggingPosition(e),n.setState({dragging:!0}),n.props.onSelectItem&&n.props.onSelectItem(t,r),n.mode=c.default.MODE_RUBER_BAND_MOVE},n.doRubberMouseDown=function(e,t,r){e.stopPropagation(),n.setDraggingPosition(e),n.setState({dragging:!0}),n.mode=t},n.onStartLink=function(e,t,r){e.stopPropagation(),n.setDraggingPosition(e);var o="1,0,0,1,"+e.clientX+","+(e.clientY-80),i={start:t.id,output:r.id,end:"*",input:"*"},a=n.getSelectedObjInfo(i);a.matrix=new h.default(o),a.tranform=o,a.item=i,n.mode=c.default.MODE_RUBER_BAND_MOVE,n.setState({dragging:!0,selection:a})},n.onEndLink=function(e,t,r){n.state.selection.type==l.ObjectTypes.TYPE_LINK&&(e.stopPropagation(),n.state.selection.item.end=t.id,n.state.selection.item.input=r.id,n.props.onAddLink&&n.props.onAddLink(n.state.selection.item))},n.doMouseMove=function(e){if(n.state.dragging){e.stopPropagation();var t=e.clientX-170,r=e.clientY-57,o=n.draggingPositionX-t,i=n.draggingPositionY-r;switch(n.mode){case c.default.MODE_GLOBAL_PAN:n.pan(o,i);break;case c.default.MODE_RUBER_BAND_MOVE:n.updateSelectedItem(f.default.moveObject(o,i,n.state));break;case c.default.MODE_RUBER_BAND_ROTATE:n.updateSelectedItem(f.default.rotateObject(t,r,n.draggingPositionX,n.draggingPositionY,n.state));break;case c.default.MODE_RUBER_BAND_RESIZE_UL:case c.default.MODE_RUBER_BAND_RESIZE_UR:case c.default.MODE_RUBER_BAND_RESIZE_DL:case c.default.MODE_RUBER_BAND_RESIZE_DR:var a=f.default.resizeObject(o,i,n.mode,n.state);n.updateSelectedItem(a)}n.setDraggingPosition(e)}},n.doMouseUp=function(e){n.setState({dragging:!1}),n.props.selectedItem&&n.props.onChange&&n.props.onChange(n.props.selectedItem,{transform:n.state.selection.matrix.matrixToText(),w:n.state.selection.box.w,h:n.state.selection.box.h})},n.doMouseWheel=function(e){e.preventDefault();var t=e.clientX-n.refs.container.offsetLeft,r=e.clientY-n.refs.container.offsetTop,o=e.deltaY>0?1.05:.95;n.zoom(o,t,r)},n.onDragOver=function(e){e.preventDefault()},n.onDrop=function(e){var t=parseInt(e.dataTransfer.getData("objtype"));if(t==l.ObjectTypes.TYPE_PAGE||t==l.ObjectTypes.TYPE_ACTION||t==l.ObjectTypes.TYPE_REDUCER){var r=e.clientX-n.refs.container.offsetLeft,o=e.clientY-n.refs.container.offsetTop,i=f.default.coordinatesGlobalToLocal(r,o,n.state.viewportMtx,null),a="1, 0, 0, 1, "+i.x+", "+i.y;n.addItem(e,null,a)}},n.addItem=function(e,t,r){var o=parseInt(e.dataTransfer.getData("type")),i=e.dataTransfer.getData("subtype"),a=parseInt(e.dataTransfer.getData("objtype")),s={name:e.dataTransfer.getData("name"),type:o,objType:a,subtype:i,transform:r};n.props.onAddItem(s,t)},n.updateSelectedItem=function(e){var t=e.matrix,o=e.box?e.box:n.state.selection.box,i=r({},n.state.selection);i.matrix=t,i.transform=t.matrixToText(),i.box=o,n.setState({selection:i})},n.pan=function(e,t){n.viewPortController.pan(e,t,n.state.viewportMtx),n.applyMatrix()},n.zoom=function(e,t,r){n.viewPortController.zoom(e,t,r,n.state.viewportMtx),n.applyMatrix()},n.applyMatrix=function(){var e=n.state.viewportMtx.matrixToText();n.setState({viewportTr:e})},n.setDraggingPosition=function(e){n.draggingPositionX=e.clientX-170,n.draggingPositionY=e.clientY-57},n.viewPortController=new p.default,n.state={data:[],dragging:!1,viewportMtx:new h.default(n.props.viewportMtx),viewportTr:"1,0,0,1,0,0",selection:n.getSelectedObjInfo(null)},n.draggingPositionX=0,n.draggingPositionY=0,n.mode=c.default.MODE_GLOBAL_PAN,y.default.addAll(n.props.data),n}return E(t,i.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.dragging!==this.state.dragging&&this.addRemoveMouseListener(t,this.state),e.selectedItem!==this.props.selectedItem&&(t.selection=this.getSelectedObjInfo(e.selectedItem)),e.data!==this.props.data&&this.calcNewDataState(e.data),!0}},{key:"ownEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"getObjType",value:function(e){return e.hasOwnProperty("start")&&e.hasOwnProperty("output")&&e.hasOwnProperty("end")&&e.hasOwnProperty("input")?l.ObjectTypes.TYPE_LINK:l.ObjectTypes.TYPE_ITEM}},{key:"render",value:function(){return a.default.createElement("div",{ref:"container",onDragOver:this.onDragOver,onDrop:this.onDrop,style:{position:"relative",userSelect:"none",width:"100%",height:"100%",outline:0},tabIndex:"0"},a.default.createElement("div",{id:"viewport",ref:"mainSvg",x:0,y:0,width:"100%",style:{position:"relative",userSelect:"none",height:"100%"},onMouseDown:this.doGlobalMouseDown,onWheel:this.doMouseWheel},a.default.createElement("div",{style:{transform:"matrix("+this.state.viewportTr+")",position:"absolute"}},a.default.createElement(s.default,{selection:this.state.selection,data:this.props.data,doObjectMouseDown:this.doObjectMouseDown,onDropIteminPage:this.onDropIteminPage,onEndLink:this.onEndLink,onStartLink:this.onStartLink})),a.default.createElement("svg",{id:"LinkManager",style:{pointerEvents:"none",position:"absolute",width:"100%",height:"100%"}},a.default.createElement("defs",null,a.default.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse"},a.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),a.default.createElement("g",{transform:"matrix("+this.state.viewportTr+")"},a.default.createElement(d.default,{links:this.props.links,selection:this.state.selection}))),this.props.selectedItem&&this.state.selection.type!=l.ObjectTypes.TYPE_LINK?a.default.createElement(u.default,{selection:this.props.selectedItem,viewport:this.state,doRubberMouseDown:this.doRubberMouseDown}):null,a.default.createElement(_,null)))}}]),t}();t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=u(o),a=n(1),s=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculateCache=function(e){return e?e.map(function(e,t){return n.dorender(e,t,e.transform)}):[]},n.onDragDrop=function(e){e.stopPropagation(),n.props.onDropIteminPage(e,n.props.item)},n.onMouseUpShell=function(e){},n.renderItems=function(){if(n.cache||(n.cache=n.calculateCache(n.props.data)),n.props.selection.item&&n.props.selection.type!=a.ObjectTypes.TYPE_LINK){var e=n.props.data.indexOf(n.props.selection.item),t=n.props.selection.transform;n.cache[e]=n.dorender(n.props.selection.item,e,t)}return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.cache))},n.cache=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentWillUpdate",value:function(e,t){e.data!==this.props.data&&(this.cache=null)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"dorender",value:function(e,t,n){var r=e.w,o=e.h;return this.props.selection.box&&e==this.props.selection.item&&(r=this.props.selection.box.w,o=this.props.selection.box.h),i.default.createElement(s.default,{key:t,item:e,transform:n,w:r,h:o,id:e.id,onStartLink:this.props.onStartLink,onEndLink:this.props.onEndLink,doObjectMouseDown:this.props.doObjectMouseDown})}},{key:"render",value:function(){return this.renderItems()}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};function s(e){return a.default.createElement("div",{className:"inputItemContainer"},a.default.createElement("div",{className:"actionConector",onMouseUp:function(t){e.onEndLink(t,e.item)}}),a.default.createElement("div",null,e.name))}function u(e){return a.default.createElement("div",{className:"outputItemContainer"},a.default.createElement("div",null,e.item.name),a.default.createElement("div",{className:"actionConector",onMouseDown:function(t){e.onStartLink(t,e.item)}}))}n(10);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseUpShell=function(e){},n.onStartLink=function(e,t){n.props.onStartLink(e,n.props.item,t)},n.onEndLink=function(e,t){n.props.onEndLink(e,n.props.item,t)},n.onEditAction=function(){},n.onExecuteAction=function(){},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"renderOutputs",value:function(){var e=this;return this.props.item.outputs?this.props.item.outputs.map(function(t,n){return a.default.createElement(u,{key:n,item:t,onStartLink:e.onStartLink})}):[]}},{key:"renderInputs",value:function(){var e=this;return this.props.item.inputs?this.props.item.inputs.map(function(t,n){return a.default.createElement(s,{key:n,item:t,onEndLink:e.onEndLink})}):[]}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{id:""+this.props.id,className:"actionContainer",style:{overflow:"hidden",transformOrigin:"0% 0%",top:0,left:0,height:this.props.h,width:this.props.w,position:"absolute",transform:"matrix("+this.props.transform+")"},onMouseDown:function(t){return e.props.doObjectMouseDown(t,e.props.item)}},a.default.createElement("div",{className:"action-title"},a.default.createElement("div",{className:"action-title-side",onClick:this.onEditAction}),a.default.createElement("div",{className:"action-title-label"},this.props.item.name),a.default.createElement("div",{className:"action-title-side",onClick:this.onExecuteAction})),a.default.createElement("div",{className:"action-split-view"},a.default.createElement("div",{className:"inputContainer",onMouseUp:function(t){return e.onMouseUpShell(1)}},this.renderInputs()),a.default.createElement("div",{className:"outputContainer"},this.renderOutputs())))}}]),t}();t.default=l},function(e,t,n){var r=n(11);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".actionContainer{\n    background-color: grey;\n    border: solid 2px #414345;\n    width: 100%;\n    height: 100%;\n    border-radius: 12px;\n    color: silver;\n\n}\n\n.action-title{\n    color: white;\n    text-align: center;\n    border-bottom: solid 1px silver;\n    font-size: 12px;\n    display:flex;\n    justify-content: space-around;\n    align-items: center\n\n}\n.action-title-side{\n    flex:0 0 auto;\n}\n.action-title-label{\n    flex:1 1 auto;\n}\n\n.action-split-view{\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-around;\n    font-size: 11px;\n\n}\n.actionConector{\n    width: 10px;\n    height: 10px;\n    border: solid 1px grey;\n    background-color: silver;\n    border-radius: 10px;\n    margin: 3px;\n}\n\n.actionConector:hover{\n    background-color: rgb(218, 7, 218);\n    border: solid 1px #414345;\n}\n\n.inputItemContainer{\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    height: 20px;\n}\n\n.outputItemContainer{\n    display: flex;\n\n    justify-content: flex-end;\n    align-items: center;\n    height: 20px;\n}\n\n.inputContainer{\n    flex: 1 1 auto;\n    justify-content: flex-start;\n   \n}\n.outputContainer{\n    flex: 1 1 auto;\n    justify-content: flex-end;\n   \n}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=u(o),a=u(n(1)),s=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}n(15);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculateCoordinates=n.calculateCoordinates.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.selectedItem||e.viewport.viewportTr!==this.props.viewport.viewportTr||e.viewport.selectedTr!==this.props.viewport.viewportTr||e.viewport.parentTr!==this.props.viewport.viewportTr}},{key:"calculateCoordinates",value:function(){var e=s.default.calculateRubberBandPosition(this.props.viewport.selection.matrix,this.props.viewport.selection.box,this.props.viewport.viewportMtx,null);return{x:e.x,y:e.y,w:e.w,h:e.h,transform:e.transform}}},{key:"render",value:function(){var e=this,t=this.calculateCoordinates();return i.default.createElement("svg",{id:"Rubberband",className:"rubberBand-Container",width:"100%",height:"100%",onMouseDown:function(t){e.props.doRubberMouseDown(t,a.default.MODE_RUBER_BAND_MOVE)}},i.default.createElement("g",{transform:"matrix("+t.transform+")"},i.default.createElement("rect",{ref:"ruberBandRect",className:"rubberBand",x:t.x,y:t.y,width:t.w,height:t.h}),i.default.createElement("rect",{ref:"ruberBandTopLeft",className:"rubberBandHandle",x:t.x-a.default.RUBBER_BAND_HANDLE_SIZE,y:t.y-a.default.RUBBER_BAND_HANDLE_SIZE,width:a.default.RUBBER_BAND_HANDLE_SIZE,height:a.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,a.default.MODE_RUBER_BAND_RESIZE_UL)}}),i.default.createElement("rect",{ref:"ruberBandTopRight",className:"rubberBandHandle",x:t.x+t.w,y:t.y-a.default.RUBBER_BAND_HANDLE_SIZE,width:a.default.RUBBER_BAND_HANDLE_SIZE,height:a.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,a.default.MODE_RUBER_BAND_RESIZE_UR)}}),i.default.createElement("rect",{ref:"ruberBandBottomLeft",className:"rubberBandHandle",x:t.x-a.default.RUBBER_BAND_HANDLE_SIZE,y:t.y+t.h,width:a.default.RUBBER_BAND_HANDLE_SIZE,height:a.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,a.default.MODE_RUBER_BAND_RESIZE_DL)}}),i.default.createElement("rect",{ref:"ruberBandBottomRight",className:"rubberBandHandle",x:t.x+t.w,y:t.y+t.h,width:a.default.RUBBER_BAND_HANDLE_SIZE,height:a.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,a.default.MODE_RUBER_BAND_RESIZE_DR)}})))}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matrixTransform=this.matrixTransform.bind(this),this.x=t,this.y=n}return r(e,[{key:"matrixTransform",value:function(e){var t=this.x,n=this.y;this.x=t*e.a+n*e.c+e.e,this.y=t*e.b+n*e.d+e.f}}]),e}();t.default=o},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".rubberBand-Container{\n    pointer-events:none;\n    position:absolute;\n}\n.rubberBand{\n    fill:none;\n    pointer-events:none;\n    stroke:rgb(238, 99, 243);\n    stroke-width:1;\n    fill-opacity:0.0;\n    stroke-opacity:1;\n    stroke-dasharray:2\n}\n\n.rubberBandHandle{\n    fill:white;\n    pointer-events:fill;\n    stroke:#ee63f3;\n    stroke-width:1;\n    fill-opacity:1;\n    stroke-opacity:0.9;\n}\n\n.rubberConnector{\n    pointer-events:fill;\n    fill:white;\n    stroke:#ee63f3;\n    stroke-width:1;\n    fill-opacity:1;\n    stroke-opacity:0.9;\n}",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"pan",value:function(e,t,n){n.e-=e,n.f-=t}},{key:"zoom",value:function(e,t,n,r){r.e-=t,r.f-=n,r.a*=e,r.b*=e,r.c*=e,r.d*=e,r.e*=e,r.f*=e,r.e+=t,r.f+=n}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(o),a=l(n(19)),s=n(1),u=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}n(21);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.prepareData=n.prepareData.bind(n),n.renderSelected=n.renderSelected.bind(n),n.links={selected:null,nonSelected:n.props.links},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return(e.links!==this.props.links||e.selection!==this.props.selection)&&(this.prepareData(e),!0)}},{key:"prepareData",value:function(e){e.selection.item!=this.props.selection.item&&(this.links=this.separateSelectedLinks(e.selection,e.links))}},{key:"separateSelectedLinks",value:function(e,t){var n={selected:[],nonSelected:[]},r=e.item;if(e.type!=s.ObjectTypes.TYPE_LINK){if(!t)return n;var o=r?r.id:null;if(!o)return n.nonSelected=t,n;for(var i=0;i<t.length;i++)this.isSelected(t[i].start,o)||this.isSelected(t[i].end,o)?n.selected.push(t[i]):n.nonSelected.push(t[i]);return n}if("*"==r.end)return n.selected.push(r),n.nonSelected=this.links.nonSelected,n}},{key:"isSelected",value:function(e,t){if(e===t)return!0;if(!e)return!1;var n=u.default.get(e);return this.isSelected(n.parent,t)}},{key:"renderSelected",value:function(){if(this.props.selection.item)return i.default.createElement(a.default,{selection:this.props.selection,links:this.links.selected})}},{key:"render",value:function(){return i.default.createElement("g",null,i.default.createElement(a.default,{selection:this.props.selection,links:this.links.nonSelected}),this.renderSelected())}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(o),a=l(n(20)),s=l(n(2)),u=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderLink=n.renderLink.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.links!==e.links||this.props.selection!==e.selection}},{key:"getCoordinates",value:function(e){var t=s.default.get(e.start),n=t.outputs?t.outputs.indexOf(e.output):0,r=t==this.props.selection.item&&this.props.selection.matrix?this.props.selection.matrix:new u.default(t.transform),o={x:r.trx+t.w-10,y:r.try+15*n+42},i=null,a=null;if("*"===e.end)a={x:(i=this.props.selection.matrix).trx,y:i.try};else{var l=s.default.get(e.end);i=l==this.props.selection.item&&this.props.selection.matrix?this.props.selection.matrix:new u.default(l.transform);l.inputs&&l.inputs.indexOf(e.input);a={x:i.trx,y:i.try}}return{start:o,end:a}}},{key:"renderLink",value:function(){var e=this,t=null;return this.props.links&&(t=this.props.links.map(function(t,n){var r=e.getCoordinates(t);return i.default.createElement(a.default,{key:n,start:r.start,end:r.end,creating:"*"==t.end,item:t,selected:t==e.props.selection.item,color:"black"})})),t}},{key:"render",value:function(){return i.default.createElement("g",null,this.renderLink())}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculatePath=n.calculatePath.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.linkCoordinates=n.linkCoordinates.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),o(t,[{key:"calculatePath",value:function(e){return"M"+this.props.start.x+" "+this.props.start.y+"  "+e.cpt1.x+" "+e.cpt1.y+" "+e.cpt2.x+" "+e.cpt2.y+" "+this.props.end.x+" "+this.props.end.y}},{key:"linkCoordinates",value:function(){var e;return{cpt1:{x:e=this.props.start.x+(this.props.end.x-this.props.start.x)/2,y:this.props.start.y},cpt2:{x:e,y:this.props.end.y}}}},{key:"getMessageCoord",value:function(e){var t=0;return e.cpt1.y==e.cpt2.y?e.cpt1.y:e.cpt1.y<e.cpt2.y?(t=(e.cpt2.y-e.cpt1.y)/2,e.cpt1.y+t):(t=(e.cpt1.y-e.cpt2.y)/2,e.cpt2.y+t)}},{key:"onMouseDown",value:function(e){}},{key:"render",value:function(){var e=this.props.selected?"#ee63f3":this.props.color,t=this.linkCoordinates();this.getMessageCoord(t);return a.default.createElement("g",{pointerEvents:this.props.creating?"none":"all"},a.default.createElement("path",{d:this.calculatePath(t),stroke:e,strokeLinejoin:"round",fill:"transparent",strokeWidth:"2",markerEnd:"url(#arrow)",onMouseDown:this.onMouseDown}),a.default.createElement("circle",{cx:this.props.start.x,cy:this.props.start.y,r:"5",fill:"white",stroke:e,strokeWidth:"2"}))}}]),t}();t.default=s},function(e,t,n){var r=n(22);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,".link-Manager{\n    pointer-events:none;\n    position:absolute;\n}",""])}])});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("react-flow",["React"],t):"object"==typeof exports?exports["react-flow"]=t(require("react")):e["react-flow"]=t(e.React)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ObjectTypes={TYPE_ITEM:0,TYPE_LINK:1};t.default={MODE_GLOBAL_PAN:1,MODE_RUBER_BAND_MOVE:2,MODE_RUBER_BAND_ROTATE:3,MODE_RUBER_BAND_RESIZE_UL:4,MODE_RUBER_BAND_RESIZE_UR:5,MODE_RUBER_BAND_RESIZE_DL:6,MODE_RUBER_BAND_RESIZE_DR:7,MODE_RUBER_PADDING:8,MODE_RUBER_ADD_LINK_LEFT:9,MODE_RUBER_ADD_LINK_RIGHT:10,MODE_PAGE_MOVE:11,CLOCKWISE:22,UNCLOCKWISE:23,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_COPY:67,KEY_CUT:88,KEY_PASTE:86,KEY_DELETE:46,RUBBER_BAND_HANDLE_SIZE:5,RUBBER_BAND_EVENT_HANDLE_SIZE:10,RUBBER_BAND_EVENT_HANDLE_SIZE_HALF:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(1)),a=s(n(3)),i=s(n(8)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var l=180/Math.PI,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"normaliseVector",value:function(e){return Math.abs(e.x)>Math.abs(e.y)?e.x>0?{x:1,y:0}:{x:-1,y:0}:e.y>0?{x:0,y:1}:{x:0,y:-1}}},{key:"calculateDistance",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"calculateRotationsAngle",value:function(t,n,r){var o=e.calculateDistance(t,n),a=e.calculateDistance(r,n),i=e.calculateDistance(t,r),u=Math.pow(o,2)+Math.pow(a,2)-Math.pow(i,2),s=2*o*a;return Math.acos(u/s)*l}},{key:"getParentMatrix",value:function(t,n){var r=u.default.get(t).parent;if(!r)return n;var o=u.default.get(r).matrix;return n=n?n.multiply(o):o,e.getParentMatrix(r,n)}},{key:"getCombineMatrix",value:function(t){var n=new a.default(u.default.get(t).transform),r=e.getParentMatrix(t,n);return r||n}},{key:"degrees",value:function(e){return e*l}},{key:"rotateToCenter",value:function(e,t,n,r){return 0!=n&&r?r=(r=(r=r.translate(e,t)).rotate(n)).translate(-e,-t):r}},{key:"scaleToCenter",value:function(e,t,n,r){return 0!=n&&r?r=(r=(r=r.translate(e,t)).scale(n)).translate(-e,-t):r}},{key:"getRotationDirection",value:function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y};return 0===(a=e.normaliseVector(a)).y?t.y-r.y<0?a.x>0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:a.x<0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:t.x-r.x>0?a.y>0?o.default.CLOCKWISE:o.default.UNCLOCKWISE:a.y<0?o.default.CLOCKWISE:o.default.UNCLOCKWISE}},{key:"transfromIncrement",value:function(e,t,n,r){var o=n;o=n?o.multiply(r):r;var a=new i.default(0,0),u=new i.default(e,t),s=o.inverse();return a.matrixTransform(s),u.matrixTransform(s),{dx:u.x-a.x,dy:u.y-a.y}}},{key:"coordinatesGlobalToLocal",value:function(e,t,n,r){var o=new i.default(e,t);return n&&o.matrixTransform(n.inverse()),r&&o.matrixTransform(r.inverse()),o}},{key:"transformToViewPort",value:function(e,t,n,r,o){var a=new i.default(e,t);if(!n||!r)return a;o&&(n=n.multiply(o));var u=n.multiply(r);return a.matrixTransform(u),a}},{key:"viewPorttoObject",value:function(e,t,n,r){var o=new a.default;o.translate(e,t);var i=n||o;return r&&(i=i.multiply(r)),i=i.inverse(),o.multiply(i)}},{key:"calculateRubberBandPosition",value:function(t,n,r,i){if(!t)return{x:0,y:0,w:0,h:0,transform:0};var u=n,s=t;(u=this.calculateTrasformBox(u,r,s,i)).x=u.x-o.default.RUBBER_BAND_HANDLE_SIZE,u.y=u.y-o.default.RUBBER_BAND_HANDLE_SIZE,u.w=u.w+2*o.default.RUBBER_BAND_HANDLE_SIZE,u.h=u.h+2*o.default.RUBBER_BAND_HANDLE_SIZE;var l=new a.default,f=u.x+u.w/2,c=u.y+u.h/2;return l=(l=e.rotateToCenter(f,c,u.angle,l)).matrixToText(),{x:u.x,y:u.y,w:u.w,h:u.h,transform:l}}},{key:"calculateTrasformBox",value:function(t,n,r,o){var a=0;0!=r.b&&(a=e.degrees(Math.atan2(r.b,r.a))),o&&(n=n.multiply(o));var u=t.w/2,s=t.h/2;r=e.rotateToCenter(u,s,-a,r);var l=n.multiply(r),f=new i.default(0,0),c=new i.default(t.w,t.h);return f.matrixTransform(l),c.matrixTransform(l),c.x=c.x-f.x,c.y=c.y-f.y,{x:f.x,y:f.y,w:c.x,h:c.y,angle:a}}},{key:"moveObject",value:function(t,n,r){var o=e.transfromIncrement(t,n,r.viewportMtx,r.selection.matrix),a=r.selection.matrix;return{matrix:a=a.translate(-o.dx,-o.dy),box:null}}},{key:"checkConstrains",value:function(t,n,r){if(!r)return!0;var o=new i.default(0,0),a=new i.default(t.w,0),u=new i.default(0,t.h),s=new i.default(t.w,t.h);return o.matrixTransform(n),!!e.isPointInBox(o,r)&&(a.matrixTransform(n),!!e.isPointInBox(a,r)&&(u.matrixTransform(n),!!e.isPointInBox(u,r)&&(s.matrixTransform(n),!!e.isPointInBox(s,r))))}},{key:"isPointInBox",value:function(e,t){return!(e.x<0||e.y<0)&&!(e.x>t.w||e.y>t.h)}},{key:"rotateObject",value:function(t,n,r,a,i){var u=i.box,s=u.x+u.w/2,l=u.y+u.h/2,f={x:r,y:a},c={x:t,y:n},d=e.transformToViewPort(s,l,i.viewportMtx,i.selection.matrix,i.parentMtx),p=e.getRotationDirection(f,c,d),h=e.calculateRotationsAngle(f,d,c);h=p==o.default.CLOCKWISE?h:-h;var y=i.selection.matrix;return{matrix:y=(y=(y=y.translate(s,l)).rotate(h)).translate(-s,-l),box:null}}},{key:"scaleObject",value:function(t,n,r,o){var a=o.box,i=a.x+a.w/2,u=a.y+a.h/2;r||(t=-t,n=-n);var s=e.transfromIncrement(t,n,o.viewportMtx,o.selection.matrix),l=e.transfromIncrement(a.x+a.w-i,a.y+a.h-u,o.viewportMtx,o.selection.matrix),f=e.transfromIncrement(a.x+a.w-s.dx-i,a.y+a.h-s.dy-u,o.viewportMtx,o.selection.matrix);if(!(a.x+a.w-s.dx<i||a.y+a.h-s.dy<u)){var c=f.dx/l.dx,d=f.dy/l.dy,p=o.selection.matrix;return{matrix:p=(p=(p=p.translate(i,u)).scale(c,d)).translate(-i,-u),box:null}}}},{key:"resizeObject",value:function(t,n,r,a){var i=a.selection.box,u=0,s=0,l=e.transfromIncrement(t,n,a.viewportMtx,a.selection.matrix),f=0,c=0,d=a.selection.matrix;switch(r){case o.default.MODE_RUBER_BAND_RESIZE_UL:u=-l.dx,s=-l.dy,f=l.dx,c=l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_UR:s=-l.dy,f=-l.dx,c=l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_DL:u=-l.dx,f=l.dx,c=-l.dy;break;case o.default.MODE_RUBER_BAND_RESIZE_DR:f=-l.dx,c=-l.dy}var p={x:0,y:0,w:i.w+f,h:i.h+c};return{matrix:d=d.translate(u,s),box:p}}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apply(t)}return r(e,[{key:"apply",value:function(e){var t=[1,0,0,1,0,0];e&&(t=e.split(",")),this.a=parseFloat(t[0]),this.b=parseFloat(t[1]),this.c=parseFloat(t[2]),this.d=parseFloat(t[3]),this.e=parseFloat(t[4]),this.f=parseFloat(t[5]),this.transform=this.transform.bind(this),this.rotate=this.rotate.bind(this),this.applyToPoint=this.applyToPoint.bind(this),this._isEqual=this._isEqual.bind(this)}},{key:"flipX",value:function(){return this.transform(-1,0,0,1,0,0)}},{key:"flipY",value:function(){return this.transform(1,0,0,-1,0,0)}},{key:"reset",value:function(){return this.a=this.d=1,this.b=this.c=this.e=this.f=0,this}},{key:"rotate",value:function(e){var t=Math.cos(.017453292519943295*e),n=Math.sin(.017453292519943295*e);return this.transform(t,n,-n,t,0,0)}},{key:"rotateDeg",value:function(e){return this.rotate(.017453292519943295*e)}},{key:"scale",value:function(e,t){return this.transform(e,0,0,t,0,0)}},{key:"scaleX",value:function(e){return this.transform(e,0,0,1,0,0)}},{key:"scaleY",value:function(e){return this.transform(1,0,0,e,0,0)}},{key:"skew",value:function(e,t){return this.transform(1,t,e,1,0,0)}},{key:"skewX",value:function(e){return this.transform(1,0,e,1,0,0)}},{key:"skewY",value:function(e){return this.transform(1,e,0,1,0,0)}},{key:"setTransform",value:function(e,t,n,r,o,a){return this.a=e,this.b=t,this.c=n,this.d=r,this.e=o,this.f=a,this}},{key:"translate",value:function(e,t){return this.transform(1,0,0,1,e,t)}},{key:"transform",value:function(t,n,r,o,a,i){var u=this.a,s=this.b,l=this.c,f=this.d,c=this.e,d=this.f,p=new e;return p.a=u*t+l*n,p.b=s*t+f*n,p.c=u*r+l*o,p.d=s*r+f*o,p.e=u*a+l*i+c,p.f=s*a+f*i+d,p}},{key:"multiply",value:function(t){var n=new e,r=this.a,o=this.b,a=this.c,i=this.d,u=this.e,s=this.f;return n.a=r*t.a+a*t.b,n.b=o*t.a+i*t.b,n.c=r*t.c+a*t.d,n.d=o*t.c+i*t.d,n.e=r*t.e+a*t.f+u,n.f=o*t.e+i*t.f+s,n}},{key:"inverse",value:function(){var t=this.a,n=this.b,r=this.c,o=this.d,a=this.e,i=this.f,u=new e,s=t*o-n*r;return u.a=o/s,u.b=-n/s,u.c=-r/s,u.d=t/s,u.e=(r*i-o*a)/s,u.f=-(t*i-n*a)/s,u}},{key:"interpolate",value:function(t,n){var r=new e;return r.a=this.a+(t.a-this.a)*n,r.b=this.b+(t.b-this.b)*n,r.c=this.c+(t.c-this.c)*n,r.d=this.d+(t.d-this.d)*n,r.e=this.e+(t.e-this.e)*n,r.f=this.f+(t.f-this.f)*n,r}},{key:"applyToPoint",value:function(e,t){return{x:e*this.a+t*this.c+this.e,y:e*this.b+t*this.d+this.f}}},{key:"applyToArray",value:function(e){var t=0,n=void 0,r=void 0,o=[];if("number"==typeof e[0])for(r=e.length;t<r;)n=this.applyToPoint(e[t++],e[t++]),o.push(n.x,n.y);else for(;n=e[t];t++)o.push(this.applyToPoint(n.x,n.y));return o}},{key:"applyToTypedArray",value:function(e){for(var t=0,n=void 0,r=e.length,o=new Float32Array(r);t<r;)n=this.applyToPoint(e[t],e[t+1]),o[t++]=n.x,o[t++]=n.y;return o}},{key:"isIdentity",value:function(){return this._isEqual(this.a,1)&&this._isEqual(this.b,0)&&this._isEqual(this.c,0)&&this._isEqual(this.d,1)&&this._isEqual(this.e,0)&&this._isEqual(this.f,0)}},{key:"isEqual",value:function(e){return this._isEqual(this.a,e.a)&&this._isEqual(this.b,e.b)&&this._isEqual(this.c,e.c)&&this._isEqual(this.d,e.d)&&this._isEqual(this.e,e.e)&&this._isEqual(this.f,e.f)}},{key:"_isEqual",value:function(e,t){return Math.abs(e-t)<1e-14}},{key:"matrixToText",value:function(){return this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f}},{key:"trx",get:function(){return this.e},set:function(e){this.e=e}},{key:"try",get:function(){return this.f},set:function(e){this.f=e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addAll=function(e){e&&(t.data={},e.forEach(function(e){t.data[e.id]=e}))},this.data={}}return r(e,[{key:"add",value:function(e,t){this.data[e]=t}},{key:"del",value:function(e){delete this.data[e]}},{key:"get",value:function(e){return this.data[e]}},{key:"delAll",value:function(){this.data={}}}]),e}());t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=y(a),u=(y(n(6)),y(n(7))),s=n(1),l=y(s),f=y(n(2)),c=y(n(14)),d=y(n(3)),p=y(n(4)),h=(y(n(15)),n(16));function y(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calcNewDataState=function(e){p.default.addAll(e)},n.addRemoveMouseListener=function(e,t){e.dragging&&!t.dragging?(document.addEventListener("mousemove",n.doMouseMove),document.addEventListener("mouseup",n.doMouseUp)):!e.dragging&&t.dragging&&(document.removeEventListener("mousemove",n.doMouseMove),document.removeEventListener("mouseup",n.doMouseUp))},n.getSelectedObjInfo=function(e){var t=e?new d.default(e.transform):new d.default,r=e?{id:e.id,x:0,y:0,w:e.w,h:e.h}:{id:"",x:0,y:0,w:0,h:0},o=e?n.getObjType(e):s.ObjectTypes.TYPE_ITEM;return{id:e?e.id:-1,item:e,matrix:t,transform:t.matrixToText(),box:r,type:o}},n.doGlobalMouseDown=function(e){0===e.button&&(n.setDraggingPosition(e),n.setState({dragging:!0}),n.mode=l.default.MODE_GLOBAL_PAN)},n.doObjectMouseDown=function(e,t,r){e.stopPropagation(),n.setDraggingPosition(e),n.setState({dragging:!0}),n.props.onSelectItem&&n.props.onSelectItem(t,r),n.selection=r;var o=n.getSelectedObjInfo(r);n.setState({dragging:!0,selection:o}),n.mode=l.default.MODE_RUBER_BAND_MOVE},n.doRubberMouseDown=function(e,t,r){e.stopPropagation(),n.setDraggingPosition(e),n.setState({dragging:!0}),n.mode=t},n.doMouseMove=function(e){if(n.state.dragging){e.stopPropagation();var t=e.clientX-n.refs.container.offsetLeft,r=e.clientY-n.refs.container.offsetTop,o=n.draggingPositionX-t,a=n.draggingPositionY-r;switch(n.mode){case l.default.MODE_GLOBAL_PAN:n.pan(o,a);break;case l.default.MODE_RUBER_BAND_MOVE:n.updateSelectedItem(f.default.moveObject(o,a,n.state));break;case l.default.MODE_RUBER_BAND_ROTATE:n.updateSelectedItem(f.default.rotateObject(t,r,n.draggingPositionX,n.draggingPositionY,n.state));break;case l.default.MODE_RUBER_BAND_RESIZE_UL:case l.default.MODE_RUBER_BAND_RESIZE_UR:case l.default.MODE_RUBER_BAND_RESIZE_DL:case l.default.MODE_RUBER_BAND_RESIZE_DR:var i=f.default.resizeObject(o,a,n.mode,n.state);n.updateSelectedItem(i)}n.setDraggingPosition(e)}},n.doMouseUp=function(e){n.setState({dragging:!1}),n.state.selection.type==s.ObjectTypes.TYPE_LINK&&n.props.onSelectItem&&n.props.onSelectItem(null,null),n.props.selectedItem&&n.props.onChange&&n.props.onChange(n.props.selectedItem,{transform:n.state.selection.matrix.matrixToText(),w:n.state.selection.box.w,h:n.state.selection.box.h})},n.doMouseWheel=function(e){e.preventDefault();var t=e.clientX-n.refs.container.offsetLeft,r=e.clientY-n.refs.container.offsetTop,o=e.deltaY>0?1.05:.95;n.zoom(o,t,r)},n.onDragOver=function(e){e.preventDefault()},n.onDrop=function(e){var t=parseInt(e.dataTransfer.getData("objtype"));if(t==s.ObjectTypes.TYPE_PAGE||t==s.ObjectTypes.TYPE_ACTION||t==s.ObjectTypes.TYPE_REDUCER){var r=e.clientX-n.refs.container.offsetLeft,o=e.clientY-n.refs.container.offsetTop,a=f.default.coordinatesGlobalToLocal(r,o,n.state.viewportMtx,null),i="1, 0, 0, 1, "+a.x+", "+a.y;n.addItem(e,null,i)}},n.addItem=function(e,t,r){var o=parseInt(e.dataTransfer.getData("type")),a=e.dataTransfer.getData("subtype"),i=parseInt(e.dataTransfer.getData("objtype")),u={name:e.dataTransfer.getData("name"),type:o,objType:i,subtype:a,transform:r};n.props.onAddItem(u,t)},n.updateSelectedItem=function(e){var t=e.matrix,o=e.box?e.box:n.state.selection.box,a=r({},n.state.selection);a.matrix=t,a.transform=t.matrixToText(),a.box=o,n.setState({box:o,selection:a})},n.pan=function(e,t){n.ZoomPanHelper.pan(e,t,n.state.viewportMtx),n.applyMatrix()},n.zoom=function(e,t,r){n.ZoomPanHelper.zoom(e,t,r,n.state.viewportMtx),n.applyMatrix()},n.applyMatrix=function(){var e=n.state.viewportMtx.matrixToText();n.setState({viewportTr:e})},n.setDraggingPosition=function(e){n.draggingPositionX=e.clientX-n.refs.container.offsetLeft,n.draggingPositionY=e.clientY-n.refs.container.offsetTop},n.renderChildren=function(){var e=n.state.selection;return n.props.children.map(function(t,r){var o=e.id==r?e.transform:null,a=e.id==r?e.box:null;return i.default.createElement(h.ViewPortElement,{id:r,key:r,transform:o,box:a,doObjectMouseDown:n.doObjectMouseDown},t)})},n.ZoomPanHelper=new c.default,n.state={data:[],dragging:!1,viewportMtx:new d.default(n.props.viewportMtx),viewportTr:"1,0,0,1,0,0",selection:n.getSelectedObjInfo(null)},n.draggingPositionX=0,n.draggingPositionY=0,n.mode=l.default.MODE_GLOBAL_PAN,p.default.addAll(n.props.data),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.dragging!==this.state.dragging&&this.addRemoveMouseListener(t,this.state),e.selectedItem!==this.props.selectedItem&&(t.selection=this.getSelectedObjInfo(e.selectedItem)),e.data!==this.props.data&&this.calcNewDataState(e.data),!0}},{key:"ownEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"getObjType",value:function(e){return e.hasOwnProperty("start")&&e.hasOwnProperty("output")&&e.hasOwnProperty("end")&&e.hasOwnProperty("input")?s.ObjectTypes.TYPE_LINK:s.ObjectTypes.TYPE_ITEM}},{key:"render",value:function(){var e=this.state,t=e.viewportTr;e.selection;return i.default.createElement("div",{ref:"container",onDragOver:this.onDragOver,onDrop:this.onDrop,style:{position:"relative",userSelect:"none",width:"100%",height:"100%",outline:0},tabIndex:"0"},i.default.createElement("div",{id:"viewport",ref:"mainSvg",x:0,y:0,width:"100%",style:{position:"relative",userSelect:"none",height:"100%"},onMouseDown:this.doGlobalMouseDown,onWheel:this.doMouseWheel},i.default.createElement("div",{style:{transform:"matrix("+t+")",position:"absolute"}},this.renderChildren()),i.default.createElement(u.default,{selection:this.selection,viewport:this.state,doRubberMouseDown:this.doRubberMouseDown})))}}]),t}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.transform,n=e.children;return i.default.createElement("div",{style:{transform:"matrix("+t+")",position:"absolute"}},n)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=s(o),i=s(n(1)),u=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}n(9);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.calculateCoordinates=n.calculateCoordinates.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.selectedItem||e.viewport.viewportTr!==this.props.viewport.viewportTr||e.viewport.selectedTr!==this.props.viewport.viewportTr||e.viewport.parentTr!==this.props.viewport.viewportTr}},{key:"calculateCoordinates",value:function(){var e=u.default.calculateRubberBandPosition(this.props.viewport.selection.matrix,this.props.viewport.selection.box,this.props.viewport.viewportMtx,null);return{x:e.x,y:e.y,w:e.w,h:e.h,transform:e.transform}}},{key:"render",value:function(){var e=this,t=this.calculateCoordinates();return this.props.selection?a.default.createElement("svg",{id:"Rubberband",className:"rubberBand-Container",width:"100%",height:"100%",onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_MOVE)}},a.default.createElement("g",{transform:"matrix("+t.transform+")"},a.default.createElement("rect",{ref:"ruberBandRect",className:"rubberBand",x:t.x,y:t.y,width:t.w,height:t.h}),a.default.createElement("rect",{ref:"ruberBandTopLeft",className:"rubberBandHandle",x:t.x-i.default.RUBBER_BAND_HANDLE_SIZE,y:t.y-i.default.RUBBER_BAND_HANDLE_SIZE,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_UL)}}),a.default.createElement("rect",{ref:"ruberBandTopRight",className:"rubberBandHandle",x:t.x+t.w,y:t.y-i.default.RUBBER_BAND_HANDLE_SIZE,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_UR)}}),a.default.createElement("rect",{ref:"ruberBandBottomLeft",className:"rubberBandHandle",x:t.x-i.default.RUBBER_BAND_HANDLE_SIZE,y:t.y+t.h,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_DL)}}),a.default.createElement("rect",{ref:"ruberBandBottomRight",className:"rubberBandHandle",x:t.x+t.w,y:t.y+t.h,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_RESIZE_DR)}}),a.default.createElement("rect",{ref:"ruberBandBottomLeft",className:"rubberBandHandle",x:t.x+t.w/2-i.default.RUBBER_BAND_HANDLE_SIZE,y:t.y+1.5*t.h,width:i.default.RUBBER_BAND_HANDLE_SIZE,height:i.default.RUBBER_BAND_HANDLE_SIZE,onMouseDown:function(t){e.props.doRubberMouseDown(t,i.default.MODE_RUBER_BAND_ROTATE)}}))):null}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matrixTransform=this.matrixTransform.bind(this),this.x=t,this.y=n}return r(e,[{key:"matrixTransform",value:function(e){var t=this.x,n=this.y;this.x=t*e.a+n*e.c+e.e,this.y=t*e.b+n*e.d+e.f}}]),e}();t.default=o},function(e,t,n){var r=n(10);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(12)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".rubberBand-Container{\n    pointer-events:none;\n    position:absolute;\n}\n.rubberBand{\n    fill:none;\n    pointer-events:none;\n    stroke:rgb(238, 99, 243);\n    stroke-width:1;\n    fill-opacity:0.0;\n    stroke-opacity:1;\n    stroke-dasharray:2\n}\n\n.rubberBandHandle{\n    fill:white;\n    pointer-events:fill;\n    stroke:#ee63f3;\n    stroke-width:1;\n    fill-opacity:1;\n    stroke-opacity:0.9;\n}\n\n.rubberConnector{\n    pointer-events:fill;\n    fill:white;\n    stroke:#ee63f3;\n    stroke-width:1;\n    fill-opacity:1;\n    stroke-opacity:0.9;\n}",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(a).concat([o]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){var r,o,a={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),u=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,l=0,f=[],c=n(13);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(m(r.parts[i],t))}else{var u=[];for(i=0;i<r.parts.length;i++)u.push(m(r.parts[i],t));a[r.id]={id:r.id,refs:1,parts:u}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],u={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(u):n.push(r[i]={id:i,parts:[u]})}return n}function h(e,t){var n=u(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=u(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),h(e,t),t}function b(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function m(e,t){var n,r,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var i=l++;n=s||(s=v(t)),r=w.bind(null,n,i,!1),o=w.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=c(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(i),u&&URL.revokeObjectURL(u)}.bind(null,n,t),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var i=n[o];(u=a[i.id]).refs--,r.push(u)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var u;if(0===(u=r[o]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete a[u.id]}}}};var E,_=(E=[],function(e,t){return E[e]=t,E.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"pan",value:function(e,t,n){n.e-=e,n.f-=t}},{key:"zoom",value:function(e,t,n,r){r.e-=t,r.f-=n,r.a*=e,r.b*=e,r.c*=e,r.d*=e,r.e*=e,r.f*=e,r.e+=t,r.f+=n}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),o(t,[{key:"render",value:function(){return i.default.createElement("svg",{x:"0",y:"0",width:"100%",height:"100%"},i.default.createElement("g",null,i.default.createElement("defs",null,i.default.createElement("pattern",{id:"smallGrid",width:"8",height:"8",patternUnits:"userSpaceOnUse"},i.default.createElement("path",{d:"M 8 0 L 0 0 0 8",fill:"none",stroke:"white",strokeWidth:"0.5"})),i.default.createElement("pattern",{id:"grid",width:"80",height:"80",patternUnits:"userSpaceOnUse"},i.default.createElement("rect",{width:"80",height:"80",fill:"url(#smallGrid)"}),i.default.createElement("path",{d:"M 80 0 L 0 0 0 80",fill:"none",stroke:"white",strokeWidth:"1"}))),i.default.createElement("rect",{width:"100%",height:"100%",fill:"silver"}),i.default.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)"})))}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewPortElement=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.withTransform=function(e){return function(e){function t(e){u(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.transform="1,0,0,1,0,0",n.w=50,n.h=50,n}return l(t,e),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.h,r=t.w,o=t.transform;return i.default.createElement("div",{id:""+this.props.id,className:"actionContainer",style:{overflow:"hidden",transformOrigin:"0% 0%",top:0,left:0,height:n,width:r,position:"absolute",transform:"matrix("+o+")"},onMouseDown:function(t){return e.props.doObjectMouseDown(t,e.props.item)}},i.default.createElement("div",null," hello"))}}]),t}(i.default.Component)};var o,a=n(0),i=(o=a)&&o.__esModule?o:{default:o};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.ViewPortElement=function(e){function t(e){u(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.children?e.children.props:null,o=r.x,a=r.y,i=r.w,l=r.h;return n.x=o||0,n.y=a||0,n.w=i||100,n.h=l||100,n.transform="1,0,0,1,"+n.x+","+n.y,n.id=e.id,n}return l(t,i.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=(t.h,t.w,t.transform),r=t.children,o=t.box;return this.transform=n||this.transform,o&&(this.w=o.w,this.h=o.h),i.default.createElement("div",{id:""+this.props.id,style:{overflow:"hidden",transformOrigin:"0% 0%",top:0,left:0,height:this.h,width:this.w,position:"absolute",transform:"matrix("+this.transform+")"},onMouseDown:function(t){return e.props.doObjectMouseDown(t,null,e)}},r)}}]),t}()}])});